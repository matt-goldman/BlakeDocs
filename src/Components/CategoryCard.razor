<div class="col-lg-6">
    <div class="card category-card bg-dark">
        <div class="card-body p-4">
            <div class="category-icon">
                @if(_icon is not null)
                {
                    <Blazicon Svg="@_icon" class="text-white" />
                }
            </div>
            <h5 class="card-title">@_title</h5>
            <p class="card-text text-muted mb-3">@_description</p>
            <div class="d-flex justify-content-between align-items-center">
                <a href="index.html" class="btn btn-outline-primary btn-sm">Explore</a>
                <small class="text-muted">@_articleCountText</small>
            </div>
        </div>
    </div>
</div>

@code {
    [Parameter]
    public required ArticleCategory Category { get; set; }

    private SvgIcon? _icon { get; set; }

    private string _title { get; set; } = string.Empty;

    private string? _description { get; set; }

    private string? _link { get; set; }

    private int _articleCount { get; set; } = 0;

    private string _articleCountText = string.Empty;

    protected override void OnParametersSet()
    {
        if (Category is null)
        {
            throw new ArgumentNullException(nameof(Category), "Category parameter cannot be null.");
        }

        _icon = Category.Icon;
        _title = Category.Title;
        _description = Category.Description;
        _link = Category.Link;
        _articleCount = Category.ArticleCount;

        if (_articleCount < 1)
        {
            _articleCountText = "No articles available";
        }
        else if (_articleCount == 1)
        {
            _articleCountText = "1 article";
        }
        else
        {
            _articleCountText = $"{_articleCount} articles";
        }

        base.OnParametersSet();
    }

    // TODO: Move to the docs renderer plugin
    public record ArticleCategory(
        SvgIcon? Icon,
        string Title,
        string? Description = null,
        string? Link = null,
        int ArticleCount = 0
    );
}